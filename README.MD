# üîó Encurtador de URLs - Teddy

Sistema de encurtamento de URLs desenvolvido com Node.js, Fastify, TypeScript e PostgreSQL.

## üìã Funcionalidades

- [ X ] Cadastro de usu√°rios
- [ X ] Autentica√ß√£o JWT
- [ X ] Encurtamento de URLs (at√© 6 caracteres)
- [ X ] Listagem de URLs do usu√°rio
- [ X ] Edi√ß√£o de URLs encurtadas
- [ X ] Contagem de acessos
- [ X ] Soft delete (inativa√ß√£o) de URLs
- [ X ] Redirecionamento de URLs encurtadas

## üõ†Ô∏è Tecnologias

- **Backend**: Node.js 22.19.0, Fastify, TypeScript
- **Banco de Dados**: PostgreSQL 15
- **ORM**: Prisma
- **Autentica√ß√£o**: JWT
- **Testes**: Vitest
- **Containeriza√ß√£o**: Docker & Docker Compose

## üöÄ Como Rodar o Projeto

### üìã Pr√©-requisitos

**Para todos os sistemas:**
- Node.js 22.19.0
- PostgreSQL (para execu√ß√£o local)
- Docker e Docker Compose (para execu√ß√£o automatizada)
- Git

### üê≥ Execu√ß√£o Automatizada com Docker (Recomendado)

Esta √© a forma mais simples de rodar o projeto, pois configura automaticamente o banco de dados e a aplica√ß√£o.

!!! ATEN√á√ÉO !!!

Antes de rodar o comando de ```docker-compose up``` garanta que as portas necess√°rias a aplica√ß√£o estejam liberadas

5432 para o banco

3333 para a API

1. **Clone o reposit√≥rio**
```bash
git clone <url-do-repositorio>
cd teddy
```

3. **Execute com Docker Compose**
```bash
# Inicia todos os servi√ßos (PostgreSQL + API)
docker-compose up -d

# Para ver os logs em tempo real
docker-compose logs -f

# Para parar os servi√ßos
docker-compose down
```
4. **Para rodar local**
- Garanta que a ver√£o do node est√° correta (NODE v22.19.0)
- Execute o docker-compose que se encontra dentro da pasta docker-local para subir uma vers√£o do banco postgres
- Execute os scrips no terminal dentro da pasta teddy
```bash
# Para instalar dependencias
npm i

# Para executar a cria√ß√£o do banco
npx prisma migrate dev

# Para subir a API
npm run dev
```
6. **Acesse a aplica√ß√£o**
- Documenta√ß√£o Swagger: http://localhost:3333/docs


### OBS

- Os testes automatizados, n√£o tive tempo de fazer mais, pois foi uma semana corrida de meus compromissos pessoais, para rodar os teste ou ver o coverage de testes no codigo use os comandos

```bash
# Para executar os testes
npm run test

# Para ver o coverage

npm run test:coverage

#A pasta criada com o coverage tem um html para melhor vizualiza√ß√£o
```

- O enpoint que recebe o alias (/urls/{alias}) n√£o responde bem ao swagger devido a limita√ß√µes de redirect do pr√≥prio swagger, basta pegar a URL encurtada e colar no navegardor ou postman para que possa ser redirecionado e contabilizar o acesso no banco

- Se for rodar local, apos rodar o automatizado lembre-se de dar stop nos containers criados automaticamente, para n√£o haver concorrencia de portas, ou altere as portas e o nome do container no docker-compose.yml que ira usar.

- Adicionei uma exporta√ß√£o da colection do insomia caso queria testar por l√°